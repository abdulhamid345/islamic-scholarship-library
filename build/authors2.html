<html><head><base href="https://websim.ai/" />
<title>Islamic Heritage Library - Scholar Works</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

<div id="app" class="min-h-screen bg-amber-50">
  <!-- Navigation -->
  <nav class="bg-green-900 text-white p-4">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-amiri">Islamic Heritage Library</h1>
      <a href="/scholars" class="bg-green-700 hover:bg-green-600 px-4 py-2 rounded-lg transition">
        Back to Scholars
      </a>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">
    <!-- Scholar Information -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
      <div class="flex flex-col md:flex-row gap-8">
        <div class="w-full md:w-1/3">
          <div class="aspect-square rounded-lg overflow-hidden">
            <img :src="scholar.imageUrl" :alt="scholar.name" class="w-full h-full object-cover">
          </div>
        </div>
        <div class="w-full md:w-2/3">
          <h2 class="text-3xl font-amiri font-bold text-green-900 mb-4">{{ scholar.name }}</h2>
          <p class="text-gray-600 leading-relaxed mb-4">{{ scholar.biography }}</p>
          <div class="flex gap-4">
            <div class="bg-amber-100 px-4 py-2 rounded-lg">
              <span class="font-bold">{{ scholar.totalBooks }}</span> Works
            </div>
            <div class="bg-amber-100 px-4 py-2 rounded-lg">
              <span class="font-bold">{{ scholar.totalDownloads }}</span> Downloads
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Books Section -->
    <div class="mb-8">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-amiri font-bold text-green-900">Scholar Works</h3>
        <div class="flex gap-4">
          <select v-model="sortBy" class="bg-white border border-gray-300 rounded-lg px-4 py-2">
            <option value="title">Title</option>
            <option value="downloads">Most Downloaded</option>
            <option value="date">Latest</option>
          </select>
        </div>
      </div>

      <!-- Books Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div v-for="book in sortedBooks" :key="book.id" 
             class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition">
          <div class="p-6">
            <h4 class="text-xl font-amiri font-bold text-green-900 mb-2">{{ book.title }}</h4>
            <p class="text-gray-600 mb-4 line-clamp-3">{{ book.summary }}</p>
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-500">{{ book.downloads }} downloads</span>
              <button @click="downloadBook(book.id)" 
                      class="bg-green-900 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                Download
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Load More -->
      <div v-if="hasMoreBooks" class="text-center mt-8">
        <button @click="loadMoreBooks" 
                class="bg-amber-100 px-6 py-3 rounded-lg hover:bg-amber-200 transition">
          Load More Books
        </button>
      </div>
    </div>
  </main>
</div>

<script>
const { createApp } = Vue

createApp({
  data() {
    return {
      scholar: {
        name: 'Ibn Taymiyyah',
        biography: 'Taqi ad-Din Ahmad ibn Taymiyyah was an Islamic scholar, theologian and logician. He lived from 1263 to 1328 CE. His intellectual activities and fervent opposition to popular religious practices made him a controversial figure in the eyes of many scholars.',
        imageUrl: 'https://images.websim.ai/scholars/ibn-taymiyyah.jpg',
        totalBooks: 45,
        totalDownloads: 125000
      },
      books: [],
      page: 1,
      hasMoreBooks: true,
      sortBy: 'title',
      loading: false
    }
  },
  computed: {
    sortedBooks() {
      return [...this.books].sort((a, b) => {
        switch(this.sortBy) {
          case 'downloads':
            return b.downloads - a.downloads
          case 'date':
            return new Date(b.publishedAt) - new Date(a.publishedAt)
          default:
            return a.title.localeCompare(b.title)
        }
      })
    }
  },
  methods: {
    async fetchBooks() {
      try {
        this.loading = true
        // In a real app, this would be an API call
        const response = await fetch(`/api/scholars/1/books?page=${this.page}`)
        const data = await response.json()
        
        this.books = [...this.books, ...data.books]
        this.hasMoreBooks = data.hasMore
        this.page++
      } catch (error) {
        console.error('Error fetching books:', error)
      } finally {
        this.loading = false
      }
    },
    async downloadBook(bookId) {
      try {
        await fetch(`/api/books/${bookId}/download`, { method: 'POST' })
        const book = this.books.find(b => b.id === bookId)
        if (book) book.downloads++
      } catch (error) {
        console.error('Error downloading book:', error)
      }
    },
    loadMoreBooks() {
      if (!this.loading) this.fetchBooks()
    }
  },
  mounted() {
    // Simulate initial data
    this.books = [
      {
        id: 1,
        title: 'The Great Compilation of Fatwa',
        summary: 'A comprehensive collection of Islamic legal opinions and rulings covering various aspects of religious, social, and personal matters.',
        downloads: 45000,
        publishedAt: '1320-01-01'
      },
      {
        id: 2,
        title: 'The Correct Response to Those Who Changed the Religion of Christ',
        summary: 'A detailed refutation of Christian doctrines from an Islamic perspective, focusing on theological differences and scriptural analysis.',
        downloads: 32000,
        publishedAt: '1321-01-01'
      },
      {
        id: 3,
        title: 'The Way of the Sunnah',
        summary: 'An extensive work on the methodology of following prophetic traditions and understanding Islamic theology.',
        downloads: 28000,
        publishedAt: '1322-01-01'
      }
    ]
  }
}).mount('#app')
</script>

<style>
.font-amiri {
  font-family: 'Amiri', serif;
}

/* Add custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #014737;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #016d54;
}
</style>

</body></html>